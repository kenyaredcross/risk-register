import{o as i,e as a,f as e,B as j,n as C,t as u,j as B,c as R,F as b,C as w,D as L,u as k,h as x,w as f,m as V,v as z,k as S,r as D,A as N,i as A}from"./vue-vendor-DORe5Ms0.js";import{u as H}from"./riskStore-CwpyAtom.js";import{_ as M}from"./index-Dy9jsXtf.js";import{R as q}from"./RiskCard-BD9Bo0CV.js";import"./useApi-C5Er8QzO.js";const T={class:"stat-label"},F={key:0,class:"text-xs text-medium-gray mt-1"},y={__name:"StatsCard",props:{value:{type:[String,Number],required:!0},label:{type:String,required:!0},subtitle:{type:String,default:""},variant:{type:String,default:"default",validator:c=>["default","critical","high","medium","low"].includes(c)},delay:{type:Number,default:0}},setup(c){const o=c,g=R(()=>({default:"bg-charcoal",critical:"bg-red-primary",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-green-500"})[o.variant]),m=R(()=>"text-white"),_=R(()=>({default:"text-charcoal",critical:"text-red-primary",high:"text-orange-600",medium:"text-yellow-600",low:"text-green-600"})[o.variant]),$=R(()=>({0:"",100:"animate-delay-100",200:"animate-delay-200",300:"animate-delay-300",400:"animate-delay-400"})[o.delay]||"");return(h,v)=>(i(),a("div",{class:C(["stat-card animate-slide-up",$.value])},[e("div",{class:C(["w-12 h-12 rounded-full flex items-center justify-center mb-3",g.value])},[j(h.$slots,"icon",{},()=>[(i(),a("svg",{class:C(["w-6 h-6",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...v[0]||(v[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2))])],2),e("div",{class:C(["stat-value",_.value])},u(c.value),3),e("div",T,u(c.label),1),c.subtitle?(i(),a("div",F,u(c.subtitle),1)):B("",!0)],2))}},O={class:"card"},E={class:"overflow-x-auto"},G={class:"inline-block min-w-full"},J={class:"flex"},K={class:"flex-1"},P={class:"flex mb-2"},Q={class:"flex-1 grid grid-cols-5 gap-2 text-center"},U={class:"space-y-2"},W={class:"w-12 flex items-center justify-center text-xs font-semibold text-medium-gray"},X={class:"flex-1 grid grid-cols-5 gap-2"},Y=["onClick","title"],Z={class:"flex mt-2"},I={class:"flex-1 grid grid-cols-5 gap-2 text-center"},ee={class:"mt-6 flex flex-wrap gap-4 justify-center"},te={class:"text-sm font-medium"},se={__name:"RiskMatrix",props:{matrix:{type:Array,required:!0},risksByCell:{type:Array,default:()=>[]}},emits:["cell-click"],setup(c,{emit:o}){const g=c,m=o,_=[{label:"Low (1-4)",class:"bg-risk-low"},{label:"Medium (5-9)",class:"bg-risk-medium"},{label:"High (10-14)",class:"bg-risk-high"},{label:"Critical (15-25)",class:"bg-risk-critical"}],$=(r,s)=>{const l=5-r,n=s+1;return l*n},h=(r,s)=>{const l=$(r,s),n=g.matrix[r][s];let d="";l>=1&&l<=4?d="bg-risk-low":l>=5&&l<=9?d="bg-risk-medium":l>=10&&l<=14?d="bg-risk-high":l>=15&&(d="bg-risk-critical");const p=n>0&&l>=15?"animate-pulse-red shadow-red-glow":"";return`${d} ${p} ${n>0?"opacity-100":"opacity-40"}`},v=(r,s,l)=>{const n=5-r,d=s+1,p=n*d;return`Likelihood: ${d}, Impact: ${n}
Rating: ${p}
Risks: ${l}`},t=(r,s)=>{if(g.risksByCell&&g.risksByCell[r]&&g.risksByCell[r][s]){const l=g.risksByCell[r][s];m("cell-click",{rowIndex:r,colIndex:s,risks:l})}};return(r,s)=>(i(),a("div",O,[s[4]||(s[4]=e("h2",{class:"card-header flex items-center justify-between"},[e("span",null,"Risk Matrix"),e("span",{class:"text-sm font-normal text-medium-gray"},"Likelihood Ã— Impact")],-1)),e("div",E,[e("div",G,[e("div",J,[s[3]||(s[3]=e("div",{class:"flex flex-col justify-center pr-4"},[e("div",{class:"writing-mode-vertical text-sm font-semibold text-medium-gray uppercase tracking-wide"}," Impact ")],-1)),e("div",K,[e("div",P,[s[0]||(s[0]=e("div",{class:"w-12"},null,-1)),e("div",Q,[(i(),a(b,null,w(5,l=>e("div",{key:`impact-${l}`,class:"text-xs font-semibold text-medium-gray"},u(6-l),1)),64))])]),e("div",U,[(i(!0),a(b,null,w(c.matrix,(l,n)=>(i(),a("div",{key:`row-${n}`,class:"flex gap-2"},[e("div",W,u(5-n),1),e("div",X,[(i(!0),a(b,null,w(l,(d,p)=>(i(),a("div",{key:`cell-${n}-${p}`,onClick:ye=>t(n,p),class:C(["aspect-square flex items-center justify-center rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",h(n,p)]),title:v(n,p,d)},[e("span",{class:C(["text-lg font-bold",d>0?"text-white":"text-gray-400"])},u(d||"0"),3)],10,Y))),128))])]))),128))]),e("div",Z,[s[1]||(s[1]=e("div",{class:"w-12"},null,-1)),e("div",I,[(i(),a(b,null,w(5,l=>e("div",{key:`likelihood-${l}`,class:"text-xs font-semibold text-medium-gray"},u(l),1)),64))])]),s[2]||(s[2]=e("div",{class:"text-center mt-4"},[e("div",{class:"text-sm font-semibold text-medium-gray uppercase tracking-wide"}," Likelihood ")],-1))])]),e("div",ee,[(i(),a(b,null,w(_,l=>e("div",{key:l.label,class:"flex items-center space-x-2"},[e("div",{class:C(["w-4 h-4 rounded",l.class])},null,2),e("span",te,u(l.label),1)])),64))])])])]))}},le=M(se,[["__scopeId","data-v-6b34dbb4"]]),ie={class:"animate-fade-in"},ae={key:0,class:"flex items-center justify-center py-20"},oe={key:1},re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-6 mb-8"},ne={class:"mb-8 animate-scale-in"},de={class:"animate-slide-up"},ce={class:"flex items-center justify-between mb-6"},ue={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},me={key:1,class:"card text-center py-12"},ve={class:"flex items-center justify-between mb-4"},ke={class:"text-xl font-bold text-charcoal"},ge={class:"space-y-3"},he=["onClick"],xe={class:"font-semibold text-charcoal"},pe={class:"text-sm text-medium-gray line-clamp-1"},fe={__name:"Dashboard",setup(c){const o=H(),g=N(),m=D(null),_=R(()=>o.risks.slice(0,6)),$=({risks:v})=>{v.length>0&&(m.value={risks:v})},h=v=>{g.push(`/risk/${v.name}`)};return L(()=>{o.loadRisks()}),(v,t)=>{const r=S("router-link");return i(),a("div",ie,[t[15]||(t[15]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-charcoal mb-2"},"Risk Dashboard"),e("p",{class:"text-medium-gray"},"Overview of organizational risk exposure and management")],-1)),k(o).loading?(i(),a("div",ae,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-primary"},null,-1)])])):(i(),a("div",oe,[e("div",re,[x(y,{value:k(o).stats.total,label:"Total Risks",variant:"default",delay:0},{icon:f(()=>[...t[4]||(t[4]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.critical,label:"Critical Risks",variant:"critical",delay:100},{icon:f(()=>[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.high,label:"High Risks",variant:"high",delay:200},{icon:f(()=>[...t[6]||(t[6]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.medium,label:"Medium Risks",variant:"medium",delay:300},{icon:f(()=>[...t[7]||(t[7]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.low,label:"Low Risks",variant:"low",delay:400},{icon:f(()=>[...t[8]||(t[8]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.overdue,label:"Overdue Reviews",variant:"critical",delay:500},{icon:f(()=>[...t[9]||(t[9]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),_:1},8,["value"]),x(y,{value:k(o).stats.dueSoon,label:"Due Soon",variant:"medium",delay:600},{icon:f(()=>[...t[10]||(t[10]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)])]),_:1},8,["value"])]),e("div",ne,[x(le,{matrix:k(o).riskMatrix.matrix,"risks-by-cell":k(o).riskMatrix.risksByCell,onCellClick:$},null,8,["matrix","risks-by-cell"])]),e("div",de,[e("div",ce,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-charcoal"},"Recent Risks",-1)),x(r,{to:"/risks",class:"btn btn-outline"},{default:f(()=>[...t[11]||(t[11]=[V(" View All Risks ",-1)])]),_:1})]),_.value.length>0?(i(),a("div",ue,[(i(!0),a(b,null,w(_.value,s=>(i(),A(q,{key:s.name,risk:s,onClick:l=>h(s)},null,8,["risk","onClick"]))),128))])):(i(),a("div",me,[...t[13]||(t[13]=[e("svg",{class:"w-16 h-16 text-medium-gray mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-medium-gray"},"No risks found in the system",-1)])]))])])),m.value?(i(),a("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[2]||(t[2]=s=>m.value=null)},[e("div",{class:"bg-white rounded-lg shadow-elegant-xl max-w-2xl w-full max-h-96 overflow-y-auto p-6",onClick:t[1]||(t[1]=z(()=>{},["stop"]))},[e("div",ve,[e("h3",ke,"Risks in Cell ("+u(m.value.risks.length)+")",1),e("button",{onClick:t[0]||(t[0]=s=>m.value=null),class:"text-medium-gray hover:text-charcoal"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ge,[(i(!0),a(b,null,w(m.value.risks,s=>(i(),a("div",{key:s.name,class:"p-3 border border-light-border rounded-lg hover:bg-light-gray cursor-pointer",onClick:l=>h(s)},[e("div",xe,u(s.name),1),e("div",pe,u(s.risk_description),1)],8,he))),128))])])])):B("",!0)])}}},Re=M(fe,[["__scopeId","data-v-4b9c36e5"]]);export{Re as default};
