import{u as R,o as i,b as l,d as t,z as u,A as S,B as g,e as f,t as m,g as x,v as y,i as k,F as _,s as D,h as c,q as w,y as M,j as V}from"./vue-vendor-CW2bKMlP.js";import{u as B}from"./riskStore-B5-mWTZJ.js";import{R as N}from"./RiskCard-CT2Bp1au.js";import"./index-CNKwlKBY.js";const A={class:"animate-fade-in"},j={class:"card mb-6"},F={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},H={class:"md:col-span-2"},U={key:0,class:"mt-4 pt-4 border-t border-light-border flex items-center justify-between"},z={class:"flex items-center space-x-2"},O={key:0,class:"badge badge-medium"},q={key:1,class:"badge badge-medium"},I={key:0,class:"flex items-center justify-center py-20"},P={key:1},T={class:"mb-4 flex items-center justify-between"},$={class:"text-medium-gray"},E={class:"font-semibold text-charcoal"},Q={class:"font-semibold text-charcoal"},G={class:"flex items-center space-x-2"},J={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},K={key:1,class:"card text-center py-12"},se={__name:"RiskList",setup(W){const d=B(),C=M(),n=c(""),a=c(""),r=c(""),p=c("rating-desc"),h=w(()=>n.value||a.value||r.value),v=w(()=>{let o=[...d.risks];if(n.value){const e=n.value.toLowerCase();o=o.filter(s=>(s.name||"").toLowerCase().includes(e)||(s.risk_description||"").toLowerCase().includes(e)||(s.risk_owner||"").toLowerCase().includes(e)||(s.department||"").toLowerCase().includes(e))}return a.value&&(o=o.filter(e=>e.risk_level===a.value)),r.value&&(o=o.filter(e=>e.status===r.value)),o.sort((e,s)=>{switch(p.value){case"rating-desc":return(s.overall_rating||0)-(e.overall_rating||0);case"rating-asc":return(e.overall_rating||0)-(s.overall_rating||0);case"date-desc":return new Date(s.creation||0)-new Date(e.creation||0);case"date-asc":return new Date(e.creation||0)-new Date(s.creation||0);case"name":return(e.name||"").localeCompare(s.name||"");default:return 0}}),o}),b=()=>{n.value="",a.value="",r.value=""},L=o=>{C.push(`/risk/${o.name}`)};return R(()=>{d.risks.length===0&&d.loadRisks()}),(o,e)=>(i(),l("div",A,[e[18]||(e[18]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-charcoal mb-2"},"Risk Register"),t("p",{class:"text-medium-gray"},"Complete list of identified risks across the organization")],-1)),t("div",j,[t("div",F,[t("div",H,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Search",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),type:"text",placeholder:"Search risks...",class:"input"},null,512),[[S,n.value]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Risk Level",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s),class:"input"},[...e[5]||(e[5]=[f('<option value="">All Levels</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],512),[[g,a.value]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),class:"input"},[...e[7]||(e[7]=[f('<option value="">All Status</option><option value="Open">Open</option><option value="In Progress">In Progress</option><option value="Closed">Closed</option><option value="Mitigated">Mitigated</option>',5)])],512),[[g,r.value]])])]),h.value?(i(),l("div",U,[t("div",z,[e[9]||(e[9]=t("span",{class:"text-sm text-medium-gray"},"Active filters:",-1)),a.value?(i(),l("span",O,m(a.value),1)):x("",!0),r.value?(i(),l("span",q,m(r.value),1)):x("",!0)]),t("button",{onClick:b,class:"text-sm text-red-primary hover:text-red-hover font-medium"}," Clear All ")])):x("",!0)]),y(d).loading?(i(),l("div",I,[...e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-primary"},null,-1)])])):(i(),l("div",P,[t("div",T,[t("p",$,[e[11]||(e[11]=k(" Showing ",-1)),t("span",E,m(v.value.length),1),e[12]||(e[12]=k(" of ",-1)),t("span",Q,m(y(d).risks.length),1),e[13]||(e[13]=k(" risks ",-1))]),t("div",G,[e[15]||(e[15]=t("label",{class:"text-sm text-medium-gray"},"Sort by:",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),class:"text-sm border border-light-border rounded px-2 py-1 focus:outline-none focus:border-charcoal"},[...e[14]||(e[14]=[f('<option value="rating-desc">Rating (High to Low)</option><option value="rating-asc">Rating (Low to High)</option><option value="date-desc">Date (Newest)</option><option value="date-asc">Date (Oldest)</option><option value="name">Name</option>',5)])],512),[[g,p.value]])])]),v.value.length>0?(i(),l("div",J,[(i(!0),l(_,null,D(v.value,s=>(i(),V(N,{key:s.name,risk:s,onClick:X=>L(s)},null,8,["risk","onClick"]))),128))])):(i(),l("div",K,[e[16]||(e[16]=t("svg",{class:"w-16 h-16 text-medium-gray mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e[17]||(e[17]=t("p",{class:"text-medium-gray mb-2"},"No risks found matching your criteria",-1)),t("button",{onClick:b,class:"text-red-primary hover:text-red-hover font-medium"}," Clear filters ")]))]))]))}};export{se as default};
