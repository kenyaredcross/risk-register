import{o as i,b as a,d as t,p as B,n as b,t as u,g as M,q as R,F as f,s as y,u as L,v as x,f as p,w as _,i as z,x as V,r as S,h as N,y as q,j as D}from"./vue-vendor-CW2bKMlP.js";import{u as H}from"./riskStore-B5-mWTZJ.js";import{_ as j}from"./index-CNKwlKBY.js";import{R as A}from"./RiskCard-CT2Bp1au.js";const T={class:"stat-label"},F={key:0,class:"text-xs text-medium-gray mt-1"},$={__name:"StatsCard",props:{value:{type:[String,Number],required:!0},label:{type:String,required:!0},subtitle:{type:String,default:""},variant:{type:String,default:"default",validator:c=>["default","critical","high","medium","low"].includes(c)},delay:{type:Number,default:0}},setup(c){const o=c,k=R(()=>({default:"bg-charcoal",critical:"bg-red-primary",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-green-500"})[o.variant]),m=R(()=>"text-white"),w=R(()=>({default:"text-charcoal",critical:"text-red-primary",high:"text-orange-600",medium:"text-yellow-600",low:"text-green-600"})[o.variant]),C=R(()=>({0:"",100:"animate-delay-100",200:"animate-delay-200",300:"animate-delay-300",400:"animate-delay-400"})[o.delay]||"");return(g,v)=>(i(),a("div",{class:b(["stat-card animate-slide-up",C.value])},[t("div",{class:b(["w-12 h-12 rounded-full flex items-center justify-center mb-3",k.value])},[B(g.$slots,"icon",{},()=>[(i(),a("svg",{class:b(["w-6 h-6",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...v[0]||(v[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2))])],2),t("div",{class:b(["stat-value",w.value])},u(c.value),3),t("div",T,u(c.label),1),c.subtitle?(i(),a("div",F,u(c.subtitle),1)):M("",!0)],2))}},E={class:"card"},O={class:"overflow-x-auto"},G={class:"inline-block min-w-full"},J={class:"flex"},K={class:"flex-1"},P={class:"flex mb-2"},Q={class:"flex-1 grid grid-cols-5 gap-2 text-center"},U={class:"space-y-2"},W={class:"w-12 flex items-center justify-center text-xs font-semibold text-medium-gray"},X={class:"flex-1 grid grid-cols-5 gap-2"},Y=["onClick","title"],Z={class:"flex mt-2"},I={class:"flex-1 grid grid-cols-5 gap-2 text-center"},tt={class:"mt-6 flex flex-wrap gap-4 justify-center"},et={class:"text-sm font-medium"},st={__name:"RiskMatrix",props:{matrix:{type:Array,required:!0},risksByCell:{type:Array,default:()=>[]}},emits:["cell-click"],setup(c,{emit:o}){const k=c,m=o,w=[{label:"Low (1-4)",class:"bg-risk-low"},{label:"Medium (5-9)",class:"bg-risk-medium"},{label:"High (10-14)",class:"bg-risk-high"},{label:"Critical (15-25)",class:"bg-risk-critical"}],C=(r,e)=>{const l=5-r,n=e+1;return l*n},g=(r,e)=>{const l=C(r,e),n=k.matrix[r][e];let d="";l>=1&&l<=4?d="bg-risk-low":l>=5&&l<=9?d="bg-risk-medium":l>=10&&l<=14?d="bg-risk-high":l>=15&&(d="bg-risk-critical");const h=n>0&&l>=15?"animate-pulse-red shadow-red-glow":"";return`${d} ${h} ${n>0?"opacity-100":"opacity-40"}`},v=(r,e,l)=>{const n=5-r,d=e+1,h=n*d;return`Likelihood: ${d}, Impact: ${n}
Rating: ${h}
Risks: ${l}`},s=(r,e)=>{if(k.risksByCell&&k.risksByCell[r]&&k.risksByCell[r][e]){const l=k.risksByCell[r][e];m("cell-click",{rowIndex:r,colIndex:e,risks:l})}};return(r,e)=>(i(),a("div",E,[e[4]||(e[4]=t("h2",{class:"card-header flex items-center justify-between"},[t("span",null,"Risk Matrix"),t("span",{class:"text-sm font-normal text-medium-gray"},"Likelihood Ã— Impact")],-1)),t("div",O,[t("div",G,[t("div",J,[e[3]||(e[3]=t("div",{class:"flex flex-col justify-center pr-4"},[t("div",{class:"writing-mode-vertical text-sm font-semibold text-medium-gray uppercase tracking-wide"}," Impact ")],-1)),t("div",K,[t("div",P,[e[0]||(e[0]=t("div",{class:"w-12"},null,-1)),t("div",Q,[(i(),a(f,null,y(5,l=>t("div",{key:`impact-${l}`,class:"text-xs font-semibold text-medium-gray"},u(6-l),1)),64))])]),t("div",U,[(i(!0),a(f,null,y(c.matrix,(l,n)=>(i(),a("div",{key:`row-${n}`,class:"flex gap-2"},[t("div",W,u(5-n),1),t("div",X,[(i(!0),a(f,null,y(l,(d,h)=>(i(),a("div",{key:`cell-${n}-${h}`,onClick:yt=>s(n,h),class:b(["aspect-square flex items-center justify-center rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",g(n,h)]),title:v(n,h,d)},[t("span",{class:b(["text-lg font-bold",d>0?"text-white":"text-gray-400"])},u(d||"0"),3)],10,Y))),128))])]))),128))]),t("div",Z,[e[1]||(e[1]=t("div",{class:"w-12"},null,-1)),t("div",I,[(i(),a(f,null,y(5,l=>t("div",{key:`likelihood-${l}`,class:"text-xs font-semibold text-medium-gray"},u(l),1)),64))])]),e[2]||(e[2]=t("div",{class:"text-center mt-4"},[t("div",{class:"text-sm font-semibold text-medium-gray uppercase tracking-wide"}," Likelihood ")],-1))])]),t("div",tt,[(i(),a(f,null,y(w,l=>t("div",{key:l.label,class:"flex items-center space-x-2"},[t("div",{class:b(["w-4 h-4 rounded",l.class])},null,2),t("span",et,u(l.label),1)])),64))])])])]))}},lt=j(st,[["__scopeId","data-v-6b34dbb4"]]),it={class:"animate-fade-in"},at={key:0,class:"flex items-center justify-center py-20"},ot={key:1},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},nt={class:"mb-8 animate-scale-in"},dt={class:"animate-slide-up"},ct={class:"flex items-center justify-between mb-6"},ut={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},mt={key:1,class:"card text-center py-12"},vt={class:"flex items-center justify-between mb-4"},kt={class:"text-xl font-bold text-charcoal"},gt={class:"space-y-3"},ht=["onClick"],xt={class:"font-semibold text-charcoal"},pt={class:"text-sm text-medium-gray line-clamp-1"},ft={__name:"Dashboard",setup(c){const o=H(),k=q(),m=N(null),w=R(()=>o.risks.slice(0,6)),C=({risks:v})=>{v.length>0&&(m.value={risks:v})},g=v=>{k.push(`/risk/${v.name}`)};return L(()=>{o.loadRisks()}),(v,s)=>{const r=S("router-link");return i(),a("div",it,[s[13]||(s[13]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-charcoal mb-2"},"Risk Dashboard"),t("p",{class:"text-medium-gray"},"Overview of organizational risk exposure and management")],-1)),x(o).loading?(i(),a("div",at,[...s[3]||(s[3]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-primary"},null,-1)])])):(i(),a("div",ot,[t("div",rt,[p($,{value:x(o).stats.total,label:"Total Risks",variant:"default",delay:0},{icon:_(()=>[...s[4]||(s[4]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),_:1},8,["value"]),p($,{value:x(o).stats.critical,label:"Critical Risks",variant:"critical",delay:100},{icon:_(()=>[...s[5]||(s[5]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)])]),_:1},8,["value"]),p($,{value:x(o).stats.high,label:"High Risks",variant:"high",delay:200},{icon:_(()=>[...s[6]||(s[6]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)])]),_:1},8,["value"]),p($,{value:x(o).stats.medium,label:"Medium Risks",variant:"medium",delay:300},{icon:_(()=>[...s[7]||(s[7]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),_:1},8,["value"]),p($,{value:x(o).stats.low,label:"Low Risks",variant:"low",delay:400},{icon:_(()=>[...s[8]||(s[8]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),_:1},8,["value"])]),t("div",nt,[p(lt,{matrix:x(o).riskMatrix.matrix,"risks-by-cell":x(o).riskMatrix.risksByCell,onCellClick:C},null,8,["matrix","risks-by-cell"])]),t("div",dt,[t("div",ct,[s[10]||(s[10]=t("h2",{class:"text-2xl font-bold text-charcoal"},"Recent Risks",-1)),p(r,{to:"/risks",class:"btn btn-outline"},{default:_(()=>[...s[9]||(s[9]=[z(" View All Risks ",-1)])]),_:1})]),w.value.length>0?(i(),a("div",ut,[(i(!0),a(f,null,y(w.value,e=>(i(),D(A,{key:e.name,risk:e,onClick:l=>g(e)},null,8,["risk","onClick"]))),128))])):(i(),a("div",mt,[...s[11]||(s[11]=[t("svg",{class:"w-16 h-16 text-medium-gray mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("p",{class:"text-medium-gray"},"No risks found in the system",-1)])]))])])),m.value?(i(),a("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s[2]||(s[2]=e=>m.value=null)},[t("div",{class:"bg-white rounded-lg shadow-elegant-xl max-w-2xl w-full max-h-96 overflow-y-auto p-6",onClick:s[1]||(s[1]=V(()=>{},["stop"]))},[t("div",vt,[t("h3",kt,"Risks in Cell ("+u(m.value.risks.length)+")",1),t("button",{onClick:s[0]||(s[0]=e=>m.value=null),class:"text-medium-gray hover:text-charcoal"},[...s[12]||(s[12]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",gt,[(i(!0),a(f,null,y(m.value.risks,e=>(i(),a("div",{key:e.name,class:"p-3 border border-light-border rounded-lg hover:bg-light-gray cursor-pointer",onClick:l=>g(e)},[t("div",xt,u(e.name),1),t("div",pt,u(e.risk_description),1)],8,ht))),128))])])])):M("",!0)])}}},$t=j(ft,[["__scopeId","data-v-23ced144"]]);export{$t as default};
