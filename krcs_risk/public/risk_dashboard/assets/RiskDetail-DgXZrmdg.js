import{r as b,o as d,e as r,f as e,t as i,v as F,x as j,y as A,j as c,c as T,E as H,u as l,n as _,F as S,C as N,g as Q,i as W,m as D,l as G,A as J}from"./vue-vendor-Bo70p1Jw.js";import{u as K}from"./riskStore-B9zyg5fM.js";import{u as X}from"./useApi-VH5eLdFx.js";import"./index-DMXc1wYA.js";const Y={class:"bg-white rounded-lg shadow-elegant-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in"},Z={class:"sticky top-0 bg-white border-b border-light-border px-6 py-4 flex items-center justify-between"},ee={class:"text-xl font-bold text-charcoal"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={key:0,class:"p-4 bg-red-light rounded-lg"},le={class:"text-sm text-red-dark"},ie={class:"flex items-center justify-end space-x-3 pt-4 border-t border-light-border"},ae=["disabled"],oe={key:0},de={key:1},re={__name:"ReviewForm",props:{review:{type:Object,default:null},reviewIndex:{type:Number,default:null}},emits:["close","submit"],setup(q,{emit:M}){var u,v,h,y,f;const g=q,s=M,k=T(()=>g.review!==null),m=b({review_date:((u=g.review)==null?void 0:u.review_date)||"",reviewed_by:((v=g.review)==null?void 0:v.reviewed_by)||"",summary:((h=g.review)==null?void 0:h.summary)||"",actions:((y=g.review)==null?void 0:y.actions)||"",next_review_date:((f=g.review)==null?void 0:f.next_review_date)||""}),w=b(!1),R=b(""),$=async()=>{w.value=!0,R.value="";try{s("submit",{data:m.value,index:g.reviewIndex})}catch(C){R.value=C.message||"Failed to save review"}finally{w.value=!1}};return(C,n)=>(d(),r("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n[7]||(n[7]=F(x=>C.$emit("close"),["self"]))},[e("div",Y,[e("div",Z,[e("h2",ee,i(k.value?"Edit Review":"Add New Review"),1),e("button",{onClick:n[0]||(n[0]=x=>C.$emit("close")),class:"text-medium-gray hover:text-charcoal"},[...n[8]||(n[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:F($,["prevent"]),class:"p-6 space-y-6"},[e("div",te,[e("div",null,[n[9]||(n[9]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Review Date *",-1)),j(e("input",{"onUpdate:modelValue":n[1]||(n[1]=x=>m.value.review_date=x),type:"date",required:"",class:"input"},null,512),[[A,m.value.review_date]])]),e("div",null,[n[10]||(n[10]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Reviewed By *",-1)),j(e("input",{"onUpdate:modelValue":n[2]||(n[2]=x=>m.value.reviewed_by=x),type:"text",required:"",placeholder:"Enter reviewer name",class:"input"},null,512),[[A,m.value.reviewed_by]])])]),e("div",null,[n[11]||(n[11]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Summary of Review *",-1)),j(e("textarea",{"onUpdate:modelValue":n[3]||(n[3]=x=>m.value.summary=x),required:"",rows:"4",placeholder:"Describe what was reviewed and key findings...",class:"input resize-none"},null,512),[[A,m.value.summary]])]),e("div",null,[n[12]||(n[12]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Decisions / Actions Agreed *",-1)),j(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=x=>m.value.actions=x),required:"",rows:"4",placeholder:"List actions and decisions made during this review...",class:"input resize-none"},null,512),[[A,m.value.actions]])]),e("div",null,[n[13]||(n[13]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Next Review Date",-1)),j(e("input",{"onUpdate:modelValue":n[5]||(n[5]=x=>m.value.next_review_date=x),type:"date",class:"input"},null,512),[[A,m.value.next_review_date]])]),R.value?(d(),r("div",se,[e("p",le,i(R.value),1)])):c("",!0),e("div",ie,[e("button",{type:"button",onClick:n[6]||(n[6]=x=>C.$emit("close")),class:"btn btn-outline"}," Cancel "),e("button",{type:"submit",disabled:w.value,class:"btn btn-primary"},[w.value?(d(),r("span",oe,"Saving...")):(d(),r("span",de,i(k.value?"Update Review":"Add Review"),1))],8,ae)])],32)])]))}},ne={class:"animate-fade-in"},ue={key:0,class:"flex items-center justify-center py-20"},ce={key:1},me={class:"mb-6"},ve={class:"flex items-start justify-between"},xe={class:"text-3xl font-bold text-charcoal mb-1"},pe={class:"text-sm text-medium-gray font-mono mb-1"},ge={class:"text-medium-gray"},be={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ke={class:"lg:col-span-2 space-y-6"},ye={class:"card"},fe={class:"text-charcoal"},we={class:"card"},Re={class:"grid grid-cols-3 gap-6"},he={class:"text-center p-4 bg-light-gray rounded-lg"},_e={class:"text-4xl font-bold text-charcoal"},Ce={class:"text-center p-4 bg-light-gray rounded-lg"},je={class:"text-4xl font-bold text-charcoal"},Ae={key:0,class:"card"},$e={class:"space-y-2"},Se={class:"text-charcoal"},Ne={key:1,class:"card"},Me={class:"space-y-2"},Be={class:"text-charcoal"},De={key:2,class:"card"},Fe={class:"space-y-3"},qe={class:"font-semibold text-charcoal mb-2"},Ve={class:"grid grid-cols-3 gap-4 text-sm"},ze={class:"ml-2 text-charcoal"},Le={class:"ml-2 text-charcoal"},Pe={class:"ml-2 text-charcoal"},Ue={class:"card"},Ie={class:"flex items-center justify-between mb-6"},Ee={key:0,class:"relative"},Oe={class:"space-y-8"},Te={class:"bg-light-gray rounded-lg p-4 hover:shadow-md transition-shadow"},He={class:"flex items-start justify-between mb-3"},Qe={class:"font-bold text-charcoal text-lg"},We={class:"text-sm text-medium-gray flex items-center mt-1"},Ge=["onClick"],Je={key:0,class:"mb-3"},Ke={class:"text-sm text-charcoal whitespace-pre-wrap leading-relaxed"},Xe={key:1,class:"mb-3"},Ye={class:"text-sm text-charcoal whitespace-pre-wrap leading-relaxed"},Ze={key:2,class:"flex items-center text-xs text-medium-gray mt-3 pt-3 border-t border-white"},et={key:1,class:"text-center py-12 text-medium-gray"},tt={class:"space-y-6"},st={class:"card"},lt={class:"space-y-4"},it={class:"text-charcoal font-medium"},at={class:"text-charcoal font-medium"},ot={class:"text-charcoal font-medium"},dt={class:"text-charcoal font-medium"},rt={class:"text-charcoal font-medium"},nt={class:"badge badge-medium"},ut={class:"text-charcoal font-medium"},ct={class:"card"},mt={class:"space-y-4"},vt={class:"text-charcoal font-medium"},xt={class:"text-charcoal font-medium"},pt={class:"card"},gt={class:"space-y-3"},bt={class:"text-sm text-charcoal"},kt={class:"text-sm text-charcoal"},yt={class:"card"},ft={class:"space-y-4"},wt={key:0},Rt={class:"text-xs text-medium-gray mb-1"},ht={class:"text-charcoal font-medium text-sm"},_t={key:1},Ct={class:"text-charcoal font-medium text-sm"},jt={key:2},At={class:"text-sm text-red-700 bg-red-50 rounded p-2"},$t={class:"space-y-2 pt-2 border-t border-light-border"},St=["disabled"],Nt=["disabled"],Mt=["disabled"],Bt=["disabled"],Dt={key:4,class:"text-xs text-red-600 mt-1"},Ft={class:"card"},qt={class:"space-y-2"},Vt=["href"],zt={key:2,class:"card text-center py-12"},Lt={class:"bg-white rounded-lg shadow-elegant-xl max-w-md w-full p-6"},Pt={key:0,class:"text-sm text-red-600 mb-3"},Ut={class:"flex space-x-3"},It=["disabled"],Wt={__name:"RiskDetail",setup(q){const M=G(),g=J(),s=K(),k=X(),m=b(!1),w=b(null),R=b(null),$=b(!1),u=b(!1),v=b(""),h=b(!1),y=b(""),f=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",C=a=>({low:"badge-low",medium:"badge-medium",high:"badge-high",critical:"badge-critical"})[(a||"").toLowerCase()]||"badge-medium",n=a=>({Overdue:"bg-red-100 text-red-700","Due Soon":"bg-yellow-100 text-yellow-700","On Track":"bg-green-100 text-green-700","Not Scheduled":"bg-gray-100 text-gray-500"})[a]||"bg-gray-100 text-gray-500",x=a=>a>=15?"bg-red-light":a>=10?"bg-orange-100":a>=5?"bg-yellow-100":"bg-green-100",B=a=>a>=15?"text-red-dark":a>=10?"text-orange-800":a>=5?"text-yellow-800":"text-green-800",V=(a=null,t=null)=>{w.value=a,R.value=t,m.value=!0},z=()=>{m.value=!1,w.value=null,R.value=null},L=async({data:a,index:t})=>{const o=s.selectedRisk.name;let p;t!==null?p=await k.updateRiskReview(o,t,a):p=await k.addRiskReview(o,a),p.success?(await s.loadRisk(o),z()):alert(p.message||"Failed to save review")},P=a=>({Draft:"bg-gray-100 text-gray-600","Pending Approval":"bg-orange-100 text-orange-700",Open:"bg-green-100 text-green-700","Pending Close Approval":"bg-orange-100 text-orange-700",Closed:"bg-blue-100 text-blue-700",Rejected:"bg-red-100 text-red-700"})[a]||"bg-gray-100 text-gray-600",U=async()=>{u.value=!0,v.value="";const a=await k.submitForApproval(s.selectedRisk.name);u.value=!1,a.success?await s.loadRisk(s.selectedRisk.name):v.value=a.message||"Failed to submit."},I=async()=>{u.value=!0,v.value="";const a=await k.requestClose(s.selectedRisk.name);u.value=!1,a.success?await s.loadRisk(s.selectedRisk.name):v.value=a.message||"Failed to request closure."},E=async()=>{u.value=!0,v.value="";const a=await k.approveRisk(s.selectedRisk.name);u.value=!1,a.success?await s.loadRisk(s.selectedRisk.name):v.value=a.message||"Failed to approve."},O=async()=>{if(!y.value.trim())return;u.value=!0,v.value="";const a=await k.rejectRisk(s.selectedRisk.name,y.value);u.value=!1,a.success?(h.value=!1,y.value="",await s.loadRisk(s.selectedRisk.name)):v.value=a.message||"Failed to reject."};return H(async()=>{const a=M.params.id;await s.loadRisk(a);const t=await k.canApproveRisk(a);$.value=t.can_approve}),(a,t)=>(d(),r("div",ne,[l(s).loading?(d(),r("div",ue,[...t[8]||(t[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-primary"},null,-1)])])):l(s).selectedRisk?(d(),r("div",ce,[e("div",me,[e("button",{onClick:t[0]||(t[0]=o=>l(g).back()),class:"text-medium-gray hover:text-charcoal mb-4 flex items-center space-x-2"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back",-1)])]),e("div",ve,[e("div",null,[e("h1",xe,i(l(s).selectedRisk.project||l(s).selectedRisk.name),1),e("p",pe,i(l(s).selectedRisk.name),1),e("p",ge,i(f(l(s).selectedRisk.creation)),1)]),e("span",{class:_(["badge text-base px-4 py-2",C(l(s).selectedRisk.risk_level)])},i(l(s).selectedRisk.risk_level||"Unknown"),3)])]),e("div",be,[e("div",ke,[e("div",ye,[t[10]||(t[10]=e("h2",{class:"card-header"},"Risk Description",-1)),e("p",fe,i(l(s).selectedRisk.risk_description||"No description available"),1)]),e("div",we,[t[15]||(t[15]=e("h2",{class:"card-header"},"Risk Assessment",-1)),e("div",Re,[e("div",he,[t[11]||(t[11]=e("div",{class:"text-sm text-medium-gray mb-2"},"Likelihood",-1)),e("div",_e,i(l(s).selectedRisk.likelihood||0),1),t[12]||(t[12]=e("div",{class:"text-xs text-medium-gray mt-1"},"out of 5",-1))]),e("div",Ce,[t[13]||(t[13]=e("div",{class:"text-sm text-medium-gray mb-2"},"Impact",-1)),e("div",je,i(l(s).selectedRisk.impact||0),1),t[14]||(t[14]=e("div",{class:"text-xs text-medium-gray mt-1"},"out of 5",-1))]),e("div",{class:_(["text-center p-4 rounded-lg",x(l(s).selectedRisk.overall_rating)])},[e("div",{class:_(["text-sm mb-2",B(l(s).selectedRisk.overall_rating)])},"Overall Rating",2),e("div",{class:_(["text-4xl font-bold",B(l(s).selectedRisk.overall_rating)])},i(l(s).selectedRisk.overall_rating||0),3),e("div",{class:_(["text-xs mt-1",B(l(s).selectedRisk.overall_rating)])},"Likelihood Ã— Impact",2)],2)])]),l(s).selectedRisk.possible_causes&&l(s).selectedRisk.possible_causes.length>0?(d(),r("div",Ae,[t[17]||(t[17]=e("h2",{class:"card-header"},"Possible Causes",-1)),e("ul",$e,[(d(!0),r(S,null,N(l(s).selectedRisk.possible_causes,(o,p)=>(d(),r("li",{key:p,class:"flex items-start space-x-2"},[t[16]||(t[16]=e("svg",{class:"w-5 h-5 text-red-primary mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",Se,i(o.cause_description),1)]))),128))])])):c("",!0),l(s).selectedRisk.effects&&l(s).selectedRisk.effects.length>0?(d(),r("div",Ne,[t[19]||(t[19]=e("h2",{class:"card-header"},"Risk Consequences",-1)),e("ul",Me,[(d(!0),r(S,null,N(l(s).selectedRisk.effects,(o,p)=>(d(),r("li",{key:p,class:"flex items-start space-x-2"},[t[18]||(t[18]=e("svg",{class:"w-5 h-5 text-red-primary mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",Be,i(o.consequence_description),1)]))),128))])])):c("",!0),l(s).selectedRisk.mitigating_actions&&l(s).selectedRisk.mitigating_actions.length>0?(d(),r("div",De,[t[23]||(t[23]=e("h2",{class:"card-header"},"Mitigating Actions",-1)),e("div",Fe,[(d(!0),r(S,null,N(l(s).selectedRisk.mitigating_actions,(o,p)=>(d(),r("div",{key:p,class:"p-4 bg-light-gray rounded-lg"},[e("div",qe,i(o.action_description),1),e("div",Ve,[e("div",null,[t[20]||(t[20]=e("span",{class:"text-medium-gray"},"Responsible Person:",-1)),e("span",ze,i(o.responsible_person||"N/A"),1)]),e("div",null,[t[21]||(t[21]=e("span",{class:"text-medium-gray"},"Deadline:",-1)),e("span",Le,i(o.deadline||"N/A"),1)]),e("div",null,[t[22]||(t[22]=e("span",{class:"text-medium-gray"},"Status:",-1)),e("span",Pe,[e("span",{class:_(["px-2 py-0.5 rounded-full text-xs font-semibold",{"bg-yellow-100 text-yellow-700":o.status==="Pending","bg-blue-100 text-blue-700":o.status==="In Progress","bg-green-100 text-green-700":o.status==="Completed","bg-gray-100 text-gray-600":o.status==="Cancelled"}])},i(o.status||"Pending"),3)])])])]))),128))])])):c("",!0),e("div",Ue,[e("div",Ie,[t[24]||(t[24]=e("h2",{class:"card-header mb-0"},"Risk Reviews",-1)),e("button",{onClick:t[1]||(t[1]=o=>V()),class:"btn btn-danger text-sm"}," Add Review ")]),l(s).selectedRisk.risk_reviews&&l(s).selectedRisk.risk_reviews.length>0?(d(),r("div",Ee,[t[31]||(t[31]=e("div",{class:"absolute left-4 top-0 bottom-0 w-0.5 bg-light-gray"},null,-1)),e("div",Oe,[(d(!0),r(S,null,N(l(s).selectedRisk.risk_reviews,(o,p)=>(d(),r("div",{key:p,class:"relative pl-12"},[t[30]||(t[30]=e("div",{class:"absolute left-2.5 top-1 w-3 h-3 rounded-full bg-red-primary ring-4 ring-white"},null,-1)),e("div",Te,[e("div",He,[e("div",null,[e("div",Qe,i(f(o.review_date)),1),e("div",We,[t[25]||(t[25]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),D(" "+i(o.reviewed_by),1)])]),e("button",{onClick:Et=>V(o,p),class:"text-medium-gray hover:text-red-primary transition-colors",title:"Edit"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ge)]),o.summary?(d(),r("div",Je,[t[27]||(t[27]=e("div",{class:"text-xs font-bold text-medium-gray uppercase tracking-wide mb-1"},"Summary",-1)),e("div",Ke,i(o.summary),1)])):c("",!0),o.actions?(d(),r("div",Xe,[t[28]||(t[28]=e("div",{class:"text-xs font-bold text-medium-gray uppercase tracking-wide mb-1"},"Actions Agreed",-1)),e("div",Ye,i(o.actions),1)])):c("",!0),o.next_review_date?(d(),r("div",Ze,[t[29]||(t[29]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),D(" Next Review: "+i(f(o.next_review_date)),1)])):c("",!0)])]))),128))])])):(d(),r("div",et,[...t[32]||(t[32]=[Q('<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-light-gray flex items-center justify-center"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p class="font-medium">No reviews yet</p><p class="text-sm mt-1">Click &quot;Add Review&quot; to create the first review</p>',3)])]))])]),e("div",tt,[e("div",st,[t[40]||(t[40]=e("h2",{class:"card-header"},"Quick Info",-1)),e("div",lt,[e("div",null,[t[33]||(t[33]=e("div",{class:"text-xs text-medium-gray mb-1"},"Risk Category",-1)),e("div",it,i(l(s).selectedRisk.risk_category||"N/A"),1)]),e("div",null,[t[34]||(t[34]=e("div",{class:"text-xs text-medium-gray mb-1"},"Risk Owner",-1)),e("div",at,i(l(s).selectedRisk.risk_owner||"Unassigned"),1)]),e("div",null,[t[35]||(t[35]=e("div",{class:"text-xs text-medium-gray mb-1"},"Department",-1)),e("div",ot,i(l(s).selectedRisk.department||"N/A"),1)]),e("div",null,[t[36]||(t[36]=e("div",{class:"text-xs text-medium-gray mb-1"},"Unit",-1)),e("div",dt,i(l(s).selectedRisk.unit||"N/A"),1)]),e("div",null,[t[37]||(t[37]=e("div",{class:"text-xs text-medium-gray mb-1"},"Region",-1)),e("div",rt,i(l(s).selectedRisk.region||"N/A"),1)]),e("div",null,[t[38]||(t[38]=e("div",{class:"text-xs text-medium-gray mb-1"},"Status",-1)),e("span",nt,i(l(s).selectedRisk.status||"Unknown"),1)]),e("div",null,[t[39]||(t[39]=e("div",{class:"text-xs text-medium-gray mb-1"},"Timeline",-1)),e("div",ut,i(l(s).selectedRisk.timeline||"N/A"),1)])])]),e("div",ct,[t[44]||(t[44]=e("h2",{class:"card-header"},"Review Schedule",-1)),e("div",mt,[e("div",null,[t[41]||(t[41]=e("div",{class:"text-xs text-medium-gray mb-1"},"Frequency",-1)),e("div",vt,i(l(s).selectedRisk.review_frequency||"Not Set"),1)]),e("div",null,[t[42]||(t[42]=e("div",{class:"text-xs text-medium-gray mb-1"},"Next Review Due",-1)),e("div",xt,i(l(s).selectedRisk.next_review_due||"N/A"),1)]),e("div",null,[t[43]||(t[43]=e("div",{class:"text-xs text-medium-gray mb-1"},"Review Status",-1)),e("span",{class:_(["px-2 py-1 rounded-full text-xs font-semibold",n(l(s).selectedRisk.review_status)])},i(l(s).selectedRisk.review_status||"Not Scheduled"),3)])])]),e("div",pt,[t[47]||(t[47]=e("h2",{class:"card-header"},"Timeline",-1)),e("div",gt,[e("div",null,[t[45]||(t[45]=e("div",{class:"text-xs text-medium-gray mb-1"},"Created",-1)),e("div",bt,i(f(l(s).selectedRisk.creation)),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-xs text-medium-gray mb-1"},"Last Modified",-1)),e("div",kt,i(f(l(s).selectedRisk.modified)),1)])])]),e("div",yt,[t[51]||(t[51]=e("h2",{class:"card-header"},"Approval",-1)),e("div",ft,[e("div",null,[t[48]||(t[48]=e("div",{class:"text-xs text-medium-gray mb-1"},"Workflow Status",-1)),e("span",{class:_(["px-3 py-1 rounded-full text-xs font-semibold",P(l(s).selectedRisk.status)])},i(l(s).selectedRisk.status||"Draft"),3)]),l(s).selectedRisk.approved_by?(d(),r("div",wt,[e("div",Rt,i(l(s).selectedRisk.status==="Rejected"?"Rejected By":"Approved By"),1),e("div",ht,i(l(s).selectedRisk.approved_by),1)])):c("",!0),l(s).selectedRisk.approval_date?(d(),r("div",_t,[t[49]||(t[49]=e("div",{class:"text-xs text-medium-gray mb-1"},"Date",-1)),e("div",Ct,i(f(l(s).selectedRisk.approval_date)),1)])):c("",!0),l(s).selectedRisk.rejection_reason?(d(),r("div",jt,[t[50]||(t[50]=e("div",{class:"text-xs text-medium-gray mb-1"},"Rejection Reason",-1)),e("div",At,i(l(s).selectedRisk.rejection_reason),1)])):c("",!0),e("div",$t,[l(s).selectedRisk.status==="Draft"||l(s).selectedRisk.status==="Rejected"?(d(),r("button",{key:0,onClick:U,disabled:u.value,class:"btn btn-primary w-full text-sm"},i(u.value?"Submitting...":"Submit for Approval"),9,St)):c("",!0),l(s).selectedRisk.status==="Open"?(d(),r("button",{key:1,onClick:I,disabled:u.value,class:"btn btn-outline w-full text-sm"},i(u.value?"Requesting...":"Request Closure"),9,Nt)):c("",!0),$.value&&(l(s).selectedRisk.status==="Pending Approval"||l(s).selectedRisk.status==="Pending Close Approval")?(d(),r("button",{key:2,onClick:E,disabled:u.value,class:"btn btn-primary w-full text-sm"},i(u.value?"Approving...":"Approve"),9,Mt)):c("",!0),$.value&&(l(s).selectedRisk.status==="Pending Approval"||l(s).selectedRisk.status==="Pending Close Approval")?(d(),r("button",{key:3,onClick:t[2]||(t[2]=o=>h.value=!0),disabled:u.value,class:"w-full px-4 py-2 border border-red-primary text-red-primary rounded-lg hover:bg-red-50 transition-colors text-sm font-medium"}," Reject ",8,Bt)):c("",!0),v.value?(d(),r("div",Dt,i(v.value),1)):c("",!0)])])]),e("div",Ft,[t[52]||(t[52]=e("h2",{class:"card-header"},"Actions",-1)),e("div",qt,[e("a",{href:`/app/program-risk-register/${l(s).selectedRisk.name}`,target:"_blank",class:"btn btn-primary w-full block text-center"}," Edit in Frappe ",8,Vt),e("button",{onClick:t[3]||(t[3]=o=>l(g).push("/risks")),class:"btn btn-outline w-full"}," View All Risks ")])])])])])):(d(),r("div",zt,[t[53]||(t[53]=e("svg",{class:"w-16 h-16 text-medium-gray mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[54]||(t[54]=e("p",{class:"text-medium-gray mb-4"},"Risk not found",-1)),e("button",{onClick:t[4]||(t[4]=o=>l(g).push("/risks")),class:"btn btn-outline"}," Back to Risk Register ")])),m.value?(d(),W(re,{key:3,review:w.value,"review-index":R.value,onClose:z,onSubmit:L},null,8,["review","review-index"])):c("",!0),h.value?(d(),r("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[7]||(t[7]=F(o=>h.value=!1,["self"]))},[e("div",Lt,[t[55]||(t[55]=e("h3",{class:"text-lg font-bold text-charcoal mb-4"},"Reject Risk",-1)),t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-charcoal mb-2"},[D("Rejection Reason "),e("span",{class:"text-red-primary"},"*")],-1)),j(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>y.value=o),rows:"3",placeholder:"Provide a reason for rejection...",class:"input w-full mb-4"},null,512),[[A,y.value]]),v.value?(d(),r("div",Pt,i(v.value),1)):c("",!0),e("div",Ut,[e("button",{onClick:t[6]||(t[6]=o=>h.value=!1),class:"btn btn-outline flex-1"},"Cancel"),e("button",{onClick:O,disabled:!y.value.trim()||u.value,class:"flex-1 px-4 py-2 bg-red-primary text-white rounded-lg hover:bg-red-dark disabled:opacity-50 font-medium"},i(u.value?"Rejecting...":"Confirm Reject"),9,It)])])])):c("",!0)]))}};export{Wt as default};
