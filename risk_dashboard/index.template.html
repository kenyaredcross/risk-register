<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KRCS Risk Management Dashboard</title>

    <!-- Favicon and touch icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ apple_touch_icon }}" />
    <link rel="icon" type="image/png" href="{{ icon_96 }}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{{ favicon_svg }}" />
    <link rel="shortcut icon" href="{{ favicon_ico }}" />

    <meta name="theme-color" content="#191919" />

    <!-- BUILD_ASSETS_PLACEHOLDER -->
  </head>
  <body>
    <div id="app"></div>

    <script>
      // Initialize frappe object with CSRF token
      window.frappe = window.frappe || {};
      window.csrf_token = '{{ csrf_token }}';

      // Get CSRF token from cookie (Frappe sets it as a cookie)
      function getCsrfTokenFromCookie() {
        const match = document.cookie.match(/csrf_token=([^;]+)/);
        return match ? decodeURIComponent(match[1]) : '';
      }

      window.frappe.csrf_token = getCsrfTokenFromCookie();

      // Boot data from Frappe backend (optional, if needed)
      if ('{{ boot }}'.trim()) {
        frappe.boot = JSON.parse({{ boot }});
      }
    </script>
  </body>
</html>
