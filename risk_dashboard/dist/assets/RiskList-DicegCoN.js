import{D as L,o as l,e as i,f as t,x as m,y as D,E as c,g,t as v,j as f,u as w,m as b,F as N,C as V,r as p,c as C,A as M,i as _}from"./vue-vendor-DORe5Ms0.js";import{u as A}from"./riskStore-xlymeSig.js";import{R as O}from"./RiskCard-DDBpVd80.js";import"./useApi-Dztx0DcP.js";import"./index-CtnbHJYv.js";const B={class:"animate-fade-in"},j={class:"card mb-6"},U={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},F={class:"md:col-span-2"},H={key:0,class:"mt-4 pt-4 border-t border-light-border flex items-center justify-between"},T={class:"flex items-center space-x-2"},z={key:0,class:"badge badge-medium"},E={key:1,class:"badge badge-medium"},I={key:2,class:"badge badge-medium"},P={key:0,class:"flex items-center justify-center py-20"},$={key:1},q={class:"mb-4 flex items-center justify-between"},Q={class:"text-medium-gray"},G={class:"font-semibold text-charcoal"},J={class:"font-semibold text-charcoal"},K={class:"flex items-center space-x-2"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},X={key:1,class:"card text-center py-12"},ie={__name:"RiskList",setup(Y){const d=A(),S=M(),u=p(""),a=p(""),n=p(""),r=p(""),x=p("rating-desc"),h=C(()=>u.value||a.value||n.value||r.value),k=C(()=>{let s=[...d.risks];if(u.value){const e=u.value.toLowerCase();s=s.filter(o=>(o.name||"").toLowerCase().includes(e)||(o.risk_description||"").toLowerCase().includes(e)||(o.risk_owner||"").toLowerCase().includes(e)||(o.department||"").toLowerCase().includes(e))}return a.value&&(s=s.filter(e=>e.risk_level===a.value)),n.value&&(s=s.filter(e=>e.status===n.value)),r.value&&(s=s.filter(e=>(e.review_status||"Not Scheduled")===r.value)),s.sort((e,o)=>{switch(x.value){case"rating-desc":return(o.overall_rating||0)-(e.overall_rating||0);case"rating-asc":return(e.overall_rating||0)-(o.overall_rating||0);case"date-desc":return new Date(o.creation||0)-new Date(e.creation||0);case"date-asc":return new Date(e.creation||0)-new Date(o.creation||0);case"name":return(e.name||"").localeCompare(o.name||"");default:return 0}}),s}),y=()=>{u.value="",a.value="",n.value="",r.value=""},R=s=>{S.push(`/risk/${s.name}`)};return L(()=>{d.risks.length===0&&d.loadRisks()}),(s,e)=>(l(),i("div",B,[e[21]||(e[21]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-charcoal mb-2"},"Risk Register"),t("p",{class:"text-medium-gray"},"Complete list of identified risks across the organization")],-1)),t("div",j,[t("div",U,[t("div",F,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Search",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),type:"text",placeholder:"Search risks...",class:"input"},null,512),[[D,u.value]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Risk Level",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value=o),class:"input"},[...e[6]||(e[6]=[g('<option value="">All Levels</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],512),[[c,a.value]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Status",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),class:"input"},[...e[8]||(e[8]=[g('<option value="">All Status</option><option value="Open">Open</option><option value="In Progress">In Progress</option><option value="Closed">Closed</option><option value="Mitigated">Mitigated</option>',5)])],512),[[c,n.value]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-charcoal mb-2"},"Review Status",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),class:"input"},[...e[10]||(e[10]=[g('<option value="">All Reviews</option><option value="Overdue">ðŸ”´ Overdue</option><option value="Due Soon">ðŸŸ¡ Due Soon</option><option value="On Track">ðŸŸ¢ On Track</option><option value="Not Scheduled">âšª Not Scheduled</option>',5)])],512),[[c,r.value]])])]),h.value?(l(),i("div",H,[t("div",T,[e[12]||(e[12]=t("span",{class:"text-sm text-medium-gray"},"Active filters:",-1)),a.value?(l(),i("span",z,v(a.value),1)):f("",!0),n.value?(l(),i("span",E,v(n.value),1)):f("",!0),r.value?(l(),i("span",I,v(r.value),1)):f("",!0)]),t("button",{onClick:y,class:"text-sm text-red-primary hover:text-red-hover font-medium"}," Clear All ")])):f("",!0)]),w(d).loading?(l(),i("div",P,[...e[13]||(e[13]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-primary"},null,-1)])])):(l(),i("div",$,[t("div",q,[t("p",Q,[e[14]||(e[14]=b(" Showing ",-1)),t("span",G,v(k.value.length),1),e[15]||(e[15]=b(" of ",-1)),t("span",J,v(w(d).risks.length),1),e[16]||(e[16]=b(" risks ",-1))]),t("div",K,[e[18]||(e[18]=t("label",{class:"text-sm text-medium-gray"},"Sort by:",-1)),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>x.value=o),class:"text-sm border border-light-border rounded px-2 py-1 focus:outline-none focus:border-charcoal"},[...e[17]||(e[17]=[g('<option value="rating-desc">Rating (High to Low)</option><option value="rating-asc">Rating (Low to High)</option><option value="date-desc">Date (Newest)</option><option value="date-asc">Date (Oldest)</option><option value="name">Name</option>',5)])],512),[[c,x.value]])])]),k.value.length>0?(l(),i("div",W,[(l(!0),i(N,null,V(k.value,o=>(l(),_(O,{key:o.name,risk:o,onClick:Z=>R(o)},null,8,["risk","onClick"]))),128))])):(l(),i("div",X,[e[19]||(e[19]=t("svg",{class:"w-16 h-16 text-medium-gray mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e[20]||(e[20]=t("p",{class:"text-medium-gray mb-2"},"No risks found matching your criteria",-1)),t("button",{onClick:y,class:"text-red-primary hover:text-red-hover font-medium"}," Clear filters ")]))]))]))}};export{ie as default};
